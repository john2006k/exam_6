<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>




<script src="js/jquery-3.4.1.min.js" ></script>
<script src="js/jquery.leanModal.min.js"></script>

<script>

    $(".redact_name").leanModal();
    $(".subscribe").leanModal();

    var baseUrl = "http://146.185.154.90:8000/blog/john.doe.sv@gmail.com/";

    $.get(baseUrl + "profile")
        .then(function(result) {
            $("#user_name").text(result.firstName + " " + result.lastName);
        });

    $("#save_name").on("click", function(){
        $.post(baseUrl + "profile", {
            firstName: $("#firstName").val(),
            lastName: $("#lastName").val()
        }).then(function(result) {
            $("#user_name").text(result.firstName + " " + result.lastName);
        })
        $("#firstName").val("");
        $("#lastName").val("");
        $(".modal").css({display: "none"})
    });

    $("#add_email").on("click", function() {
        $.post(baseUrl + "subscribe", {
            email: $("#email").val()
        })
            .then(function(result) {
                $.get(baseUrl + "subscribe")
                    .then(function(res){
                        for (var i = 0; i < res.length; i++) {
                            console.log(res[i].email);
                        }
                    })
                $("#email").val("");
                $(".modal").css({display: "none"})
            })
    })

</script>
</body>
</html>